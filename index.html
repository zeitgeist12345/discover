<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.85em' font-size='85' text-anchor='middle' x='50'>ğŸŒ</text></svg>">
</head>

<body>
    <!-- API Status Indicator -->
    <div id="api-status-indicator" class="api-status"></div>

    <!-- Settings Icon -->
    <button id="settings-toggle" class="settings-btn">âš™ï¸</button>

    <!-- Settings Screen -->
    <div id="settings-screen" class="settings-screen" style="display: none;">
        <h2>âš™ï¸ Settings</h2>
        <div class="settings-section">
            <label for="filter-tags">Filter by Tags (comma separated):</label>
            <br>
            <span>Allowlist: <input type="text" id="filter-tags-allowlist" placeholder="e.g. ai, tools, productivity"
                    onkeydown="if (event.key === 'Enter') { event.preventDefault(); applyTagFilter(); }">
            </span>
            <span>Blocklist: <input type="text" id="filter-tags-blocklist" placeholder="e.g. ai, tools, productivity"
                    onkeydown="if (event.key === 'Enter') { event.preventDefault(); applyTagFilter(); }">
            </span>
            <br>
            <button id="apply-filter-btn" class="btn" onclick="applyTagFilter()">Apply Filter</button>
        </div>
        <div id="filter-success" class="success-message" style="display: none;"></div>
        <div>
            <h3 style="text-align: center;margin: 1rem;">Tips:</h3>
            <p style="text-align: center;margin: 1rem;">1. Press "Ctrl+w" to quickly close the current browser tab.</p>
        </div>
        <div>
            <h3 style="text-align: center;margin: 1rem;">Feedback:</h3>
            <p style="text-align: center;margin: 1rem;">1. <a href="https://github.com/abirusabil123/discover"
                    target="_blank">https://github.com/abirusabil123/discover</a></p>
        </div>
    </div>

    <div class="header">
        <h1>ğŸŒ Discover</h1>
        <p>Discover amazing links from around the world!</p>
        <p>No more personalized recommendation algorithms!</p>
    </div>

    <div class="controls">
        <!-- Loading Animation -->
        <div id="loading-animation" class="loading-animation">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading amazing links...</p>
        </div>

        <!-- Control Buttons (initially hidden) -->
        <div id="control-buttons" class="control-buttons" style="display: none;">
            <button class="btn direction-btn" onclick="loadPreviousWebsite()">â¬…ï¸ Previous link</button>
            <button class="btn" onclick="loadRandomWebsite()">ğŸ² Load Random Link</button>
            <button class="btn direction-btn" onclick="loadNextWebsite()">â¡ï¸ Next link</button>
            <button class="btn add-website-btn" onclick="showAddWebsiteForm()">â• Add link</button>
        </div>
    </div>

    <div class="current-site" id="current-site-info">
        <div class="website-box">
            <a href="#" id="current-site-link" target="_blank">Click "ğŸ² Load Random Link" to discover amazing
                links!<br>Links open in a new tab for the best experience.</a>
            <div id="website-description" class="website-description"></div>
            <div id="website-tags" class="website-tags"></div>

            <!-- Stats and Action Buttons -->
            <div class="website-stats" id="website-stats" style="display: none;">
                <div class="stats-row">
                    <button class="action-btn dislikesDesktop-btn" id="dislikesDesktop-btn"
                        onclick="dislikesDesktopWebsite()">ğŸ‘<span class="count-badge"
                            id="dislikesDesktop-count">0</span>
                    </button>
                    <div class="views-center">
                        <span class="stat-value" id="views-count">0</span>
                        <span class="stat-label">views</span>
                    </div>
                    <button class="action-btn likesDesktop-btn" id="likesDesktop-btn"
                        onclick="likesDesktopWebsite()">ğŸ‘<span class="count-badge" id="likesDesktop-count">0</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Website Modal -->
    <div id="add-website-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>â• Add New Link</h3>
                <span class="close" onclick="hideAddWebsiteForm()">&times;</span>
            </div>
            <form id="add-website-form" onsubmit="submitWebsite(event)">
                <div class="form-group">
                    <label for="website-name">Link Name *</label>
                    <input type="text" id="website-name" name="name" required placeholder="e.g., GitHub">
                </div>
                <div class="form-group">
                    <label for="website-url">Link URL *</label>
                    <input type="text" id="website-url" name="url" required placeholder="https://www.github.com">
                </div>
                <div class="form-group">
                    <label for="website-description">Description *</label>
                    <textarea id="website-description" name="description" required
                        placeholder="Brief description of the link..." rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="website-tags">Tags</label>
                    <div class="tags-input-container">
                        <input type="text" id="add-website-tags" placeholder="Type a tag and press Enter or comma">
                        <div id="tags-display" class="tags-display"></div>
                    </div>
                    <small class="form-text">Add multiple tags separated by commas.</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="hideAddWebsiteForm()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submit-btn">Add Website</button>
                </div>

                <!-- Error message area - below submit button -->
                <div id="modal-error-message" class="modal-error" style="display: none;">
                    <div class="error-box">
                        <p id="modal-error-text"></p>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="static.js"></script>
    <script src="script.js"></script>
</body>

</html>